<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico">
    <title>Estimation Result</title>
    <style>
    .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .plan-type-container {
            background-color: #f0f0f0;
            padding: 10px;
        }

        .result{
            background-color: #ffffff;
            padding: 10px;
        }
        .project-type-container{
          background-color: #f0f0f0;
            padding: 10px;
        }
  </style>
</head>
<body>
    <h1><img class="logo" src="companylogo.jpg" alt="UIPL"></h1>
    <!-- In result.html -->
    
    <div id="result">
      <!-- The result box content will be updated by JavaScript -->
    </div>
    <div class="result-grid">
      <div class="project-type-container" id="projectTypeContainer">

      </div>
      <div class="plan-type-container" id="planTypeContainer">
        <!-- The plan type will be added here by JavaScript -->
      </div>
        
      
    </div>
      
    <button id="download-pdf-btn">Download PDF</button>

    <script>
        // Get URL parameters using URLSearchParams
        const urlParams = new URLSearchParams(window.location.search);
        const projectType = urlParams.get("projectType");
        const city = urlParams.get("city");
        const propertyType = urlParams.get("propertyType");
        const styling = urlParams.get("styling");
        const ceilingHeight = urlParams.get("ceilingHeight");
        const plan = urlParams.get("plan");
        const carpetArea = parseFloat(urlParams.get("carpetArea"));
        const selectedAddOns = urlParams.get("selectedAddOns").split(",");
        const estimatedPrice = parseFloat(urlParams.get("estimatedPrice"));

        // Update the result box content
        const resultContainer = document.getElementById("result");
        resultContainer.innerHTML = `
        <h2>Estimation Results</h2>
        <p><strong>Project Type:</strong> ${projectType}</p>
        <p><strong>City:</strong> ${city}</p>
        <p><strong>Property Type:</strong> ${propertyType}</p>
        <p><strong>Styling:</strong> ${styling}</p>
        <p><strong>Ceiling Height:</strong> ${ceilingHeight}</p>
        <p><strong>Plan Type:</strong> ${plan}</p>
        <p><strong>Carpet Area:</strong> ${carpetArea} sq. ft.</p>
        <p><strong>Add-ons:</strong> ${selectedAddOns.join(", ")}</p>
        <p><strong>Estimated Price:</strong> ${estimatedPrice.toLocaleString('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 })}</p>`;

        const ProjectTypeContainer = document.getElementById("projectTypeContainer")
        
        const planTypeContainer = document.getElementById("planTypeContainer");

        // Display plan type using flexbox
        const planTypeContent = `
            <p><h2>Plan Type: ${plan}</h2></p>
            <div>${getPlanTypeDescription(plan)}</div>
        `;
        planTypeContainer.innerHTML = planTypeContent;


        function getPlanTypeDescription(planType) {
            switch (planType) {
                case "Premium":
                    return "<li>Local Sourcing</li> <li>Budget-Friendly</li> <li>Standard Designing</li>  <li>Basic Accessories</li>";
                case "Premium Plus":
                    return "<li>Local Sourcing</li><li>Mid-Priced</li><li>Premium Designing</li> <li>Enhanced Accessories</li>";
                case "Luxury":
                    return "<li>Local & Global Sourcing</li><li>High-Priced</li><li>Lavish Designing</li><li>Premium Accessories</li>";
                case "Ultra Luxury":
                    return "<li>Local & Global Sourcing</li><li>Elite Pricing</li><li>Ultimate Designing</li><li>Luxury Accessories</li><li>Premium Imported Products</li>";
                default:
                    return "Plan Type Description Not Available";
            }
        }

        const projectPlan = projectType; // Assuming you can access the plan directly

        let content = "<h2>Your Project Plan Contains:</h2><ul>";

        if (projectPlan === "warmshell") {
            content += `
            <li>Family & Individual Lifestyle Analysis </li>
            <li>Research & Study of Requirements</li>
            <li>Style & Theme Selection</li>
            <li>Effective Space Planning</li>
            <li>Furniture, Civil, Electrical, Flooring & Ceiling Layout</li>
            <li>Colour Concept</li>
            <li>Customized Conceptual Designing with Elevation</li>
            <li>Detailed Working Drawings</li>
            <li> 3D Images to Visualize Important Areas</li>
            <li> Exclusive Arts for Desired Ambiance</li>
            <li>Roomwise Budgeting & Delivery List with Make/Specifications</li>
            `;
        } else if (projectPlan === "bareshell") {
            content += `
            <li>Family & Individual Lifestyle Analysis </li>
            <li>Research & Study of Requirements</li>
            <li>Style & Theme Selection</li>
            <li>Effective Space Planning</li>
            <li>Furniture, Civil, Electrical, Flooring & Ceiling Layout</li>
            <li>Colour Concept</li>
            <li>Customized Conceptual Designing with Elevation</li>
            <li>Detailed Working Drawings</li>
            <li> 3D Images to Visualize Important Areas</li>
            <li> Exclusive Arts for Desired Ambiance</li>
            <li>Roomwise Budgeting & Delivery List with Make/Specifications</li>
            <li>Bathroom Design and Layout (if applicable for the project)</li>
            <li>Balcony Design and Layout (if applicable for the project)</li>
            `;
        } else if (projectPlan === "architecture") {
            content += `
            <li>Site Evaluation and Analysis, including the impact of existing or proposed development on the immediate environs.</li>
            <li>Landscape Architecture</li>
            <li>Structural Design, ensuring the structural integrity of the entire building and balconies.</li>
            <li>Balcony Design, including layout, materials, and aesthetics (if applicable for the project)</li>
            <li>Incorporating Balcony Safety Measures, such as railings and safety features (if applicable for the project)</li>
            <li>3D Visualization of Balcony Areas (if applicable for the project)</li>
            <li>Fire Detection, Fire Protection, and Security System Planning (if required)</li>
            <li> Heating, Ventilation, and Air Conditioning (HVAC) Design and Other Mechanical Systems (if required)</li>
            <li>Illumination Design for the entire building, including indoor and outdoor spaces</li>
             `;
        } else if (projectPlan === "renovation"){
            content += `
            <li>Family & Individual Lifestyle Analysis</li>
            <li>Research & Study of Requirements</li>
            <li>Style & Theme Selection</li>
            <li>Effective Space Planning</li>
            <li>Furniture, Civil, Electrical, Flooring & Ceiling Layout</li>
            <li>Colour Concept</li>
            <li>Customized Conceptual Designing with Elevation</li>
            <li>Detailed Working Drawings</li>
            <li>3D Images to Visualize Important Areas</li>
            <li>Exclusive Arts for Desired Ambiance</li>
            <li>Roomwise Budgeting & Delivery List with Make/Specifications</li>
            <li>Bathroom Renovation and Design (if applicable for the project)</li>`

        }

        content += "</ul>";
        projectTypeContainer.innerHTML += content; // Append to existing content
       
       </script>
      
     
      <script>
        // ... Your previous code ...
        window.jsPDF = window.jspdf.jsPDF;
        document.getElementById("download-pdf-btn").addEventListener("click", function () {
            // Ensure html2canvas is loaded before using it
            if (typeof html2canvas !== 'undefined') {
                const pdf = new jsPDF({
                    orientation: "portrait",
                    unit: "mm",
                    format: "a4"
                });
    
                // Capture the result and result-grid elements
                const resultElement = document.getElementById("result");
                const resultGridElement = document.querySelector(".result-grid");
    
                // Capture the content of the elements using html2canvas
                html2canvas(resultElement, { scale: 0.7 }).then(resultCanvas => {
                    html2canvas(resultGridElement, { scale: 0.5 }).then(resultGridCanvas => {
                        // Add the result content to the PDF
                        pdf.addImage(resultCanvas, "JPEG", 10, 10, 0, 0);
    
                        // Add the result-grid content to the PDF
                        pdf.addPage();
                        pdf.addImage(resultGridCanvas, "JPEG", 10, 10, 0, 0);
    
                        // Save the PDF
                        pdf.save("estimate.pdf");
                    });
                });
            } else {
                console.error("html2canvas is not loaded.");
            }
        });
    </script>
    
</body>
</html>